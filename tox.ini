[tox]
envlist = py27,py33,flake8,sphinx

[testenv]
deps =
    nose
    coverage
commands =
    python setup.py install
    nosetests --config=etc/nose.cfg --with-doctest --with-coverage --cover-package=hospital hospital
    rm .coverage
    pip freeze
whitelist_externals =
    rm

[testenv:flake8]
deps =
    flake8
commands =
    flake8 hospital

[testenv:sphinx]
deps =
    nose
    sphinxcontrib-testbuild
commands =
    nosetests --config=etc/nose.cfg sphinxcontrib.testbuild.tests

[healthcheck]
deps =
    nose
commands =
    nosetests --config=etc/nose.cfg --attr="is_healthcheck" hospital
